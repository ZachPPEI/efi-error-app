<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P3YKE5RLB4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B8P8JF9HZX');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PPEI ERROR CODE FINDER</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Open+Sans:wght@400;600&display=swap');

        /* Define a consistent color scheme with CSS variables */
        :root {
            --bg-dark: #1a1a1a;
            --bg-container: rgba(28, 28, 28, 0.9); /* Semi-transparent for readability */
            --bg-section: rgba(45, 45, 45, 0.85);
            --bg-card: rgba(51, 51, 51, 0.9);
            --text-primary: #fff;
            --accent-color: #00cc66; /* Shifted to a green shade to match circuit board */
            --accent-hover: #00b359; /* Darker green for hover */
            --border-color: #00cc66; /* Match the circuit board green */
            --shadow-color: rgba(0, 204, 102, 0.3); /* Green-tinted shadow */
        }

        body {
            font-family: 'Open Sans', Arial, sans-serif;
            font-size: 16px;
            margin: 0;
            background: url('/static/circuit_board.png') repeat; /* Use the circuit board image */
            background-size: 50%; /* Adjust size for a subtle, repeating pattern */
            background-attachment: fixed; /* Keeps background fixed while scrolling */
            background-color: var(--bg-dark); /* Fallback color */
            color: var(--text-primary);
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            background: var(--bg-container);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 20px var(--shadow-color);
            backdrop-filter: blur(5px); /* Adds a subtle blur effect for modern browsers */
        }

        .header {
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            margin-bottom: 5px;
            padding: 20px;
            background: linear-gradient(to right, rgba(28, 28, 28, 0.9), rgba(45, 45, 45, 0.9));
            border-radius: 8px;
        }

        .header-buttons {
            display: flex;
            flex-direction: row;
            gap: 10px;
            align-items: flex-start;
        }

        .home-button a, .feedback-button a {
            padding: 8px 18px;
            font-size: 14px;
            background: var(--accent-color);
            color: #0a0a0a;
            border: 2px solid var(--accent-color);
            border-radius: 6px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .home-button a:hover, .feedback-button a:hover {
            background: var(--accent-hover);
            transform: scale(1.05);
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-left: 10px;
        }

        .header-gif img {
            max-width: 150px;
            border-radius: 4px;
        }

        h1 {
            text-align: left;
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 42px;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px var(--shadow-color);
        }

        .description {
            text-align: center;
            color: var(--text-primary);
            font-size: 16px;
            margin-bottom: 20px;
            padding: 10px;
            background: var(--bg-section);
            border-radius: 4px;
            line-height: 1.6;
        }

        .efi-error-codes, .additional-info, .truck-box {
            margin-top: 30px;
            padding: 20px;
            background: var(--bg-section);
            border-left: 5px solid var(--border-color);
            border-radius: 4px;
        }

        .efi-error-codes h3, .additional-info h3, .truck-box h2 {
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            margin: 0 0 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px var(--shadow-color);
            cursor: pointer;
            transition: color 0.3s;
            position: relative;
        }

        .efi-error-codes h3:hover, .additional-info h3:hover, .truck-box h2:hover {
            color: #e6e6e6;
        }

        .efi-error-codes h3::before, .additional-info h3::before, .truck-box h2::before {
            content: "▶ ";
            display: inline-block;
            transition: transform 0.3s;
        }

        .efi-error-codes h3.expanded::before, .additional-info h3.expanded::before, .truck-box h2.expanded::before {
            transform: rotate(90deg);
        }

        .efi-content, .additional-content, .truck-info {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.8s ease;
        }

        form {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px var(--shadow-color);
        }

        label {
            font-weight: 600;
            margin-right: 15px;
            color: var(--text-primary);
            font-size: 16px;
        }

        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            width: 250px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: var(--bg-section);
            color: var(--text-primary);
            outline: none;
            text-transform: uppercase;
        }

        input[type="text"]::placeholder {
            color: #ccc;
            font-style: italic;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background: var(--accent-color);
            color: #0a0a0a;
            border: 2px solid var(--accent-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        button:hover {
            background: var(--accent-hover);
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.98);
        }

        .result {
            margin-top: 20px;
            padding: 20px 30px;
            background: rgba(42, 42, 42, 0.9);
            border-left: 6px solid var(--accent-color);
            border-radius: 8px;
            max-width: 100%;
            overflow-wrap: break-word;
        }

        .result h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 22px;
            margin-bottom: 15px;
        }

        .result p {
            margin: 15px 0;
            color: var(--text-primary);
            word-wrap: break-word;
            max-width: 100%;
            line-height: 1.6;
        }

        .result a {
            color: var(--accent-color);
            text-decoration: underline;
            padding: 4px 8px;
            display: inline-block;
            max-width: 100%;
            font-size: 18px;
            line-height: 1.5;
            white-space: normal;
        }

        .result ul {
            margin: 10px 0;
            padding-left: 25px;
            list-style-type: disc;
            max-width: 100%;
        }

        .result li {
            margin-bottom: 15px;
            word-break: break-all;
            overflow-wrap: break-word;
            white-space: normal;
            max-width: 100%;
        }

        .support-link {
            text-align: center;
            margin-top: 20px;
        }

        .support-link a {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
        }

        .support-link a:hover {
            text-decoration: underline;
            color: #e6e6e6;
        }

        .additional-resources {
            margin-top: 20px;
            padding: 15px;
            background: var(--bg-section);
            border-left: 5px solid var(--border-color);
            border-radius: 4px;
        }

        .additional-resources h4 {
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            margin: 0 0 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px var(--shadow-color);
            cursor: pointer;
            transition: color 0.3s;
        }

        .additional-resources h4:hover {
            color: #e6e6e6;
        }

        .additional-resources h4::before {
            content: "▶ ";
            display: inline-block;
            transition: transform 0.3s;
        }

        .additional-resources h4.expanded::before {
            transform: rotate(90deg);
        }

        .resources-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.8s ease;
        }

        .resources-content ul {
            list-style-type: disc;
            padding-left: 25px;
            margin: 0;
        }

        .resources-content li {
            color: var(--text-primary);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .resources-content a {
            color: var(--accent-color);
            text-decoration: underline;
            transition: color 0.3s;
        }

        .resources-content a:hover {
            color: #e6e6e6;
        }

        .truck-column {
            float: left;
            width: 100%;
            padding: 0 10px;
        }

        .truck-row {
            display: flex;
            justify-content: space-between;
        }

        .truck-section {
            width: 30%;
            margin-right: 10px;
        }

        .truck-section:last-child {
            margin-right: 0;
        }

        .truck-section h3 {
            color: var(--text-primary);
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
        }

        .truck-section p {
            color: var(--text-primary);
            font-size: 14px;
            margin: 5px 0;
            line-height: 1.4;
        }

        .pids-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .pids-section {
            width: 30%;
            text-align: center;
        }

        .pids-section h4 {
            color: var(--text-primary);
            font-size: 16px;
            margin-bottom: 10px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pids-section a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            display: block;
            margin-bottom: 5px;
        }

        .pids-section a:hover {
            text-decoration: underline;
            color: #e6e6e6;
        }

        .l5p-instructions {
            width: 100%;
            text-align: left;
            margin-top: 10px;
        }

        .read-file-instructions {
            list-style-type: none;
        }

        .loader {
            text-align: center;
            color: var(--accent-color);
            font-size: 18px;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .container {
                width: 100%;
                padding: 10px;
            }
            .header {
                flex-direction: column;
                text-align: center;
                padding: 10px;
            }
            .header-buttons {
                flex-direction: column;
                gap: 5px;
                align-items: center;
            }
            .header-content {
                flex-direction: column;
                align-items: center;
                gap: 10px;
                margin-top: 10px;
                margin-left: 0;
            }
            .header-gif img {
                max-width: 120px;
            }
            input[type="text"], button {
                width: 100%;
                margin-bottom: 10px;
                font-size: 16px;
            }
            button {
                padding: 12px 20px;
            }
            .truck-row, .pids-row {
                flex-direction: column;
                gap: 15px;
            }
            .truck-section, .pids-section {
                width: 100%;
                margin-right: 0;
                margin-bottom: 20px;
                text-align: left;
            }
            .efi-error-codes, .additional-info {
                margin-top: 20px;
            }
            .l5p-instructions {
                text-align: center;
            }
            .result {
                padding: 15px;
            }
            .additional-resources {
                padding: 10px;
            }
            .additional-resources h4 {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-buttons">
                <div class="home-button"><a href="/">HOME</a></div>
                <div class="feedback-button"><a href="mailto:zach@ppei.com?subject=PPEI%20Code%20Killer%20Feedback&body=Hi%20PPEI%20team,%20I%20have%20some%20suggestions%20to%20improve%20the%20PPEI%20Code%20Killer%20app:%0D%0A%0D%0A[Your%20suggestions%20here]">FEEDBACK</a></div>
            </div>
            <div class="header-content">
                <div class="header-gif"><img src="{{ url_for('static', filename='PPEI_TURBO_HEAD_GIF.gif') }}" alt="PPEI Performance GIF"></div>
                <h1>PPEI ERROR CODE FINDER</h1>
            </div>
        </div>
        <div class="description">
            Resolve EFILive errors efficiently—enter your code, access expert solutions, and download files to maintain peak performance for your truck. Developed by PPEI’s experienced professionals.
        </div>
        <div class="efi-error-codes" id="efiErrorCodes">
            <h3 onclick="toggleEfiErrorCodes()" aria-expanded="false">EFI Error Codes</h3>
            <div class="efi-content" id="efiContent">
                <form id="errorForm">
                    <label for="error_code">Enter Error Code (e.g., 0502 or $0502):</label>
                    <input type="text" id="error_code" name="error_code" placeholder="e.g., 0502 or $0502" required autocomplete="off">
                    <button type="submit">Crush It</button>
                </form>
                <div id="resultContainer"></div>
                <div class="support-link">
                    <a href="mailto:zach@ppei.com?subject=PPEI%20Error%20Code%20Help&body=Hi%20PPEI%20team,%20I%20can’t%20find%20my%20error%20code%20(%20INSERT_CODE_HERE).%20Can%20you%20help?" id="supportLink">Not seeing your code? Contact the PPEI team!</a>
                </div>
                <div class="additional-resources" id="additionalResourcesEFI">
                    <h4 onclick="toggleAdditionalResourcesEFI()" aria-expanded="false">Additional Resources</h4>
                    <div class="resources-content" id="resourcesContentEFI">
                        <ul>
                            <li><a href="https://ppei.com/pages/contact" target="_blank">PPEI Support Page</a> - Official support and documentation.</li>
                            <li><a href="{{ url_for('download_file', filename='2001 – 2010 Duramax EFILive V3 AutoCal ECM Flash Install Instructions.pdf') }}">2001 - 2010 Duramax ECM flashing instructions</a> - Guide for ECM flashing.</li>
                            <li><a href="{{ url_for('download_file', filename='TCM Stock File Instructions - 01-10.pdf') }}">2001 - 2010 Duramax TCM read file instructions</a> - Instructions for TCM read files.</li>
                            <li><a href="{{ url_for('download_file', filename='Aisin Transmission Tuning Install Instructions - EFILive.pdf') }}">Aisin TCM tuning instructions</a> - Guide for Aisin TCM tuning.</li>
                            <li><a href="{{ url_for('download_file', filename='EFILive Autocal V3 Datalogging.pdf') }}">V3 autocal datalogging instructions</a> - Instructions for V3 autocal datalogging.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="additional-info" id="additionalInfo">
            <h3 onclick="toggleAdditionalInfo()" aria-expanded="false">HP Tuners Help</h3>
            <div class="additional-content" id="additionalContent">
                <div class="pids-row">
                    <div class="pids-section">
                        <h4>Duramax</h4>
                        <a href="{{ url_for('download_file', filename='L5P PIDS.Channels.xml') }}">PID List - L5P</a>
                        <a href="{{ url_for('download_file', filename='lml channels hpt.Channels.xml') }}">PID List - LML</a>
                    </div>
                    <div class="pids-section">
                        <h4>Cummins</h4>
                        <a href="{{ url_for('download_file', filename='2019-2022 Ram 2500-5500 6.7L Cummins_DMRs_General_Derates_SOTF Slot.Channels.xml') }}">PID List - 2019-2022 Ram</a>
                        <a href="{{ url_for('download_file', filename='early 5.9 channels.Channels.xml') }}">PID List - 5.9L Cummins</a>
                        <a href="{{ url_for('download_file', filename='Early6.7Channels1.Channels.xml') }}">PID List - 2013-2018 Ram</a>
                    </div>
                    <div class="pids-section">
                        <h4>Ford</h4>
                        <a href="{{ url_for('download_file', filename='6.7 ford channels2.Channels.Channels (1).xml') }}">PID List - Ford</a>
                    </div>
                </div>
                <div class="additional-resources" id="additionalResourcesHP">
                    <h4 onclick="toggleAdditionalResourcesHP()" aria-expanded="false">Additional Resources</h4>
                    <div class="resources-content" id="resourcesContentHP">
                        <ul>
                            <li><a href="{{ url_for('download_file', filename='T87A-T93-Installation-Steps.pdf') }}">L5P TCM Tuning Guide</a> - Instructions for L5P TCM tuning.</li>
                            <li><a href="{{ url_for('download_file', filename='MPVI3 Read and Infolog Instructions.pdf') }}">Read File and Infolog</a> - Guide for reading files and logs.</li>
                            <li><a href="{{ url_for('download_file', filename='HP Tuners Installing a PPEI calibration.pdf') }}">HP tuners file writing instructions</a> - Guide for writing files with HP Tuners.</li>
                            <li><a href="{{ url_for('download_file', filename='HP Tuners SOTF Instructions.pdf') }}">Duramax SOTF instructions</a> - Switch-on-the-fly instructions for Duramax.</li>
                            <li><a href="{{ url_for('download_file', filename='HPTuners_CUMMINS_SOTF_UserGuide_2022v1.7.pdf') }}">Cummins SOTF instructions</a> - Switch-on-the-fly instructions for Cummins.</li>
                            <li><a href="{{ url_for('download_file', filename='22+ RAM Read File  Infolog.pdf') }}">22+ Ram read and info log instructions</a> - Instructions for reading and logging on 2022+ Ram.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="truck-box">
            <h2 onclick="toggleTruckInfo()" aria-expanded="false">What Truck Do I Have?</h2>
            <div class="truck-info">
                <div class="truck-column">
                    <div class="truck-row">
                        <div class="truck-section">
                            <h4>Duramax</h4>
                            <p>01-04 - LB7 (E54)</p>
                            <p>04-05 - LLY (E60)</p>
                            <p>06-07 - LBZ (E35A)</p>
                            <p>07-10 - LMM (E35B)</p>
                            <p>11-14 - LML (E86A)</p>
                            <p>15-16 - LML (E86B)</p>
                        </div>
                        <div class="truck-section">
                            <h4>Cummins</h4>
                            <p>03-07 - 5.9L (CMB)</p>
                            <p>07-09 - 6.7L (CMC)</p>
                            <p>10-12 - 6.7L (CMD)</p>
                            <p>13-18 - 6.7L (CME)</p>
                        </div>
                        <div class="truck-section">
                            <h4>FAQs</h4>
                            <p><strong>Q: How do I find my truck’s ECM type?</strong><br>A: Check the service parts identification sticker in your glovebox or use a scan tool like EFILive to read the ECM ID.</p>
                            <p><strong>Q: Can I tune a locked ECM?</strong><br>A: Some locked ECMs require a bench flash—see error $0333 for steps or contact PPEI support.</p>
                            <p><strong>Q: What if my truck isn’t listed?</strong><br>A: Email <a href="mailto:zach@ppei.com">zach@ppei.com</a> with your VIN for compatibility info.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('errorForm').onsubmit = function(event) {
            event.preventDefault();
            let code = document.getElementById('error_code').value.trim();
            const efiSection = document.getElementById('efiErrorCodes');
            const efiContent = document.getElementById('efiContent');
            const resultContainer = document.getElementById('resultContainer');

            // Show loading spinner
            resultContainer.innerHTML = '<div class="loader">Loading...</div>';

            // Ensure the section is expanded
            if (!efiSection.classList.contains('expanded')) {
                efiSection.classList.add('expanded');
                efiSection.querySelector('h3').setAttribute('aria-expanded', 'true');
                efiContent.style.maxHeight = calculateTotalHeight(efiContent) + 'px';
            }

            fetch('/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: 'error_code=' + encodeURIComponent(code)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('Fetch response:', data);
                document.getElementById('error_code').value = data.error_code.replace('$', '');
                resultContainer.innerHTML = '';

                if (data.result) {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'result';
                    resultDiv.innerHTML = `
                        <h2>Error: ${data.error_code}</h2>
                        <p><strong>Description:</strong> ${data.result.description}</p>
                        <p><strong>Cause:</strong> ${data.result.cause}</p>
                        <p><strong>Action:</strong> ${data.result.action}</p>
                        <p><strong>Files:</strong> ${data.result.files.length ? 
                            '<ul>' + data.result.files.map(file => 
                                file.startsWith('http') ? 
                                `<li><a href="${file}" target="_blank" class="file-link">Watch Video Tutorial</a></li>` : 
                                `<li><a href="/download/Files/${file}" title="${file}" class="file-link">${file}</a></li>`
                            ).join('') + '</ul>' : 'None'}
                        </p>
                    `;
                    resultContainer.appendChild(resultDiv);
                } else {
                    resultContainer.innerHTML = '<p>No result found for this code.</p>';
                }

                const supportLink = document.getElementById('supportLink');
                supportLink.href = `mailto:zach@ppei.com?subject=PPEI%20Error%20Code%20Help&body=Hi%20PPEI%20team,%20I%20can’t%20find%20my%20error%20code%20(${data.error_code}).%20Can%20you%20help?`;

                // Adjust max-height after content changes
                requestAnimationFrame(() => {
                    efiContent.style.maxHeight = calculateTotalHeight(efiContent) + 'px';
                });
            })
            .catch(error => {
                console.error('Fetch error:', error);
                resultContainer.innerHTML = '<p>Error loading result. Please try again.</p>';
                // Adjust max-height after content changes
                requestAnimationFrame(() => {
                    efiContent.style.maxHeight = calculateTotalHeight(efiContent) + 'px';
                });
            });
        };

        function calculateTotalHeight(element) {
            let height = element.scrollHeight;
            element.querySelectorAll('.resources-content').forEach(nested => {
                if (nested.closest('.additional-resources').classList.contains('expanded')) {
                    height += nested.scrollHeight;
                }
            });
            return height;
        }

        function toggleSection(sectionId, contentId) {
            const section = document.getElementById(sectionId);
            const content = document.getElementById(contentId);
            const isExpanded = section.classList.contains('expanded');
            const header = section.querySelector('h3, h4');

            if (isExpanded) {
                content.style.maxHeight = calculateTotalHeight(content) + 'px';
                setTimeout(() => {
                    content.style.maxHeight = '0';
                    section.classList.remove('expanded');
                    if (header) header.setAttribute('aria-expanded', 'false');
                }, 10);
            } else {
                section.classList.add('expanded');
                if (header) header.setAttribute('aria-expanded', 'true');
                content.style.maxHeight = calculateTotalHeight(content) + 'px';
            }
        }

        function toggleEfiErrorCodes() {
            toggleSection('efiErrorCodes', 'efiContent');
        }

        function toggleAdditionalInfo() {
            toggleSection('additionalInfo', 'additionalContent');
        }

        function toggleTruckInfo() {
            const section = document.querySelector('.truck-box');
            const content = document.querySelector('.truck-info');
            const isExpanded = section.classList.contains('expanded');
            const header = section.querySelector('h2');

            if (isExpanded) {
                content.style.maxHeight = calculateTotalHeight(content) + 'px';
                setTimeout(() => {
                    content.style.maxHeight = '0';
                    section.classList.remove('expanded');
                    header.setAttribute('aria-expanded', 'false');
                }, 10);
            } else {
                section.classList.add('expanded');
                header.setAttribute('aria-expanded', 'true');
                content.style.maxHeight = calculateTotalHeight(content) + 'px';
            }
        }

        function toggleAdditionalResourcesEFI() {
            toggleSection('additionalResourcesEFI', 'resourcesContentEFI');
            const efiContent = document.getElementById('efiContent');
            if (document.getElementById('efiErrorCodes').classList.contains('expanded')) {
                efiContent.style.maxHeight = calculateTotalHeight(efiContent) + 'px';
            }
        }

        function toggleAdditionalResourcesHP() {
            toggleSection('additionalResourcesHP', 'resourcesContentHP');
            const additionalContent = document.getElementById('additionalContent');
            if (document.getElementById('additionalInfo').classList.contains('expanded')) {
                additionalContent.style.maxHeight = calculateTotalHeight(additionalContent) + 'px';
            }
        }

        window.onload = function() {
            if (document.querySelector('.result')) {
                const efiSection = document.getElementById('efiErrorCodes');
                const efiContent = document.getElementById('efiContent');
                efiSection.classList.add('expanded');
                efiSection.querySelector('h3').setAttribute('aria-expanded', 'true');
                efiContent.style.maxHeight = calculateTotalHeight(efiContent) + 'px';
            }
        };
    </script>
</body>
</html>